    # æµ‹è¯•å•æŒ‡æ ‡æŸ¥è¯¢
    reply, graph_state = await handle_single_query(user_id, "æ˜¨å¤©çš„é«˜ç‚‰å·¥åºèƒ½è€—æ˜¯å¤šå°‘", graph)
    print("Single Query Reply:", reply)
    print(json.dumps(graph_state, indent=2, ensure_ascii=False))

    # æµ‹è¯•
    reply, graph_state = await handle_single_query(user_id, "é‚£é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼å‘¢", graph)
    print("Single Query Reply 2:", reply)
    print(json.dumps(graph_state, indent=2, ensure_ascii=False))

    # æµ‹è¯•ä¸‰æ­¥å¯¹æ¯”
    reply, graph_state = await handle_compare(user_id, "å®ƒä»¬å¯¹æ¯”å‘¢ï¼Ÿ", graph, {"candidates": []})
    print("Single Query Reply 3:", reply)
    print(json.dumps(graph_state, indent=2, ensure_ascii=False))
    
(myenv) fusionshen@fusionshen-ThinkPad-T14-Gen-1:~/Desktop/LLM/ask_agent$ python -m core.pipeline_handlers
2025-11-14 15:23:08,317 | INFO | llm_client | âœ… Using ChatOllama from langchain-ollama
/home/fusionshen/myenv/lib/python3.12/site-packages/jieba/_compat.py:18: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
  import pkg_resources
âœ… sentence-transformers ç‰ˆæœ¬: 5.1.1
<frozen runpy>:128: RuntimeWarning: 'core.pipeline_handlers' found in sys.modules after import of package 'core', but prior to execution of 'core.pipeline_handlers'; this may result in unpredictable behaviour
2025-11-14 15:23:11,468 | INFO | formula-api | ğŸ”„ æ­£åœ¨åˆå§‹åŒ–å…¬å¼æ•°æ®ï¼ˆfull loadï¼‰...
Building prefix dict from the default dictionary ...
2025-11-14 15:23:14,786 | DEBUG | jieba | Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
2025-11-14 15:23:14,791 | DEBUG | jieba | Loading model from cache /tmp/jieba.cache
Loading model cost 0.605 seconds.
2025-11-14 15:23:15,391 | DEBUG | jieba | Loading model cost 0.605 seconds.
Prefix dict has been built successfully.
2025-11-14 15:23:15,391 | DEBUG | jieba | Prefix dict has been built successfully.
2025-11-14 15:23:28,426 | INFO | formula-api | âœ… Loaded 270817 formulas. Tokenization ready.
HAVE_ST : True
2025-11-14 15:23:28,428 | INFO | formula-api | Auto-selected embedding device: cpu
OFFLINE_MODEL_PATH:/home/fusionshen/Desktop/LLM/ask_agent/models/sbert_offline_models/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d
2025-11-14 15:23:28,428 | INFO | formula-api | ğŸ§© å°è¯•åŠ è½½æœ¬åœ°æ¨¡å‹: /home/fusionshen/Desktop/LLM/ask_agent/models/sbert_offline_models/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d
2025-11-14 15:23:28,429 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: /home/fusionshen/Desktop/LLM/ask_agent/models/sbert_offline_models/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d
2025-11-14 15:23:29,397 | INFO | formula-api | âœ… å·²æˆåŠŸåŠ è½½ç¦»çº¿æ¨¡å‹ã€‚
2025-11-14 15:23:30,060 | INFO | formula-api | âœ… Loaded embeddings from cache ((270817, 384))
2025-11-14 15:23:30,060 | INFO | formula-api | âœ… åˆå§‹åŒ–å®Œæˆï¼Œç”¨æ—¶ 18.59s
2025-11-14 15:23:30,060 | INFO | pipeline.handlers | âœ… è¿›å…¥ single query æ¨¡å¼ã€‚
2025-11-14 15:23:30,061 | INFO | pipeline.handlers | ğŸ”¹ handle_single_query user_input=æ˜¨å¤©çš„é«˜ç‚‰å·¥åºèƒ½è€—æ˜¯å¤šå°‘
âš ï¸ æ— èŠ‚ç‚¹å¯æ¢å¤ intent_info
2025-11-14 15:23:30,061 | INFO | pipeline.handlers | âš ï¸ æ— å†å²èŠ‚ç‚¹å¯ç”¨ï¼Œåˆ›å»ºé»˜è®¤ indicatorã€‚
2025-11-14 15:23:30,256 | INFO | httpx | HTTP Request: GET http://192.168.92.13:11434/api/tags "HTTP/1.1 200 OK"
2025-11-14 15:23:31,414 | INFO | httpx | HTTP Request: POST http://192.168.92.13:11434/api/chat "HTTP/1.1 200 OK"
```json
{
  "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—",
  "timeString": "2025-11-13",
  "timeType": "DAY"
}
```
2025-11-14 15:23:32,707 | INFO | llm_client | âœ… ä» LLM è¾“å‡ºä¸­æˆåŠŸè§£æ JSONã€‚
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:00<00:00,  6.21it/s]
ğŸŸ¢ ç™»å½•è¿”å›ï¼š {'error': None, 'data': {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiIxNDMiLCJ0ZW5hbnRpZCI6IjEwNSIsInVuYW1lIjoi566h55CG5ZGYIiwidG5hbWUiOiLlrp3pkqLmuZvmsZ_pkqLpk4HmnInpmZDlhazlj7giLCJ0c2lkZSI6IjEiLCJncm91cGlkIjoiMCIsInNsaWRpbmciOiIwIiwicnNpbmNlIjoiMTc2MzI0ODcxMyIsIm5iZiI6MTc2MzEwNDQxMywiZXhwIjoxNzYzMjIwMjEzLCJpc3MiOiJzaGJhb25lbmciLCJhdWQiOiJzaGJhb25lbmcifQ.9xcykfXUqIwIGOLoZpPyBwoRn_86bP1O5lYnCwrn6go', 'expiresAt': '2025-11-15 23:22:33', 'tenantId': 105, 'tenancyName': 'zjis', 'userId': 143, 'userName': 'admin'}, 'status': 200, 'msg': 'æ“ä½œæˆåŠŸ', 'duration': -1}
ğŸŸ¡ è°ƒç”¨æ¥å£: http://www.shbaoenergy.com:8081/emscore/api/services/nYMC/calcData/QueryItemValuesAsync
ğŸ§© è¯·æ±‚å‚æ•°: {'expressionList': {'GXNHLT1100.IXRL': 'GXNHLT1100.IXRL'}, 'clock': '2025-11-13', 'timegranId': 'DAY'}
ğŸŸ¢ è¿”å›æ•°æ®: {'error': None, 'data': {'GXNHLT1100.IXRL': None}, 'status': 200, 'msg': 'æ“ä½œæˆåŠŸ', 'duration': -1}
2025-11-14 15:23:33,872 | INFO | pipeline.handlers | âš™ï¸ å¹³å°æŸ¥è¯¢æˆåŠŸ: {'GXNHLT1100.IXRL': None}
2025-11-14 15:23:33,872 | INFO | context_graph | ğŸ†• ContextGraph.add_node -> id=1, indicator=é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼, time=2025-11-13
2025-11-14 15:23:33,872 | INFO | context_graph | ğŸ•˜ add_history: æ˜¨å¤©çš„é«˜ç‚‰å·¥åºèƒ½è€—æ˜¯å¤šå°‘ -> âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None 
Single Query Reply: âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None 
{
  "graph": {
    "nodes": [
      {
        "id": 1,
        "indicator_entry": {
          "status": "completed",
          "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼",
          "formula": "GXNHLT1100.IXRL",
          "timeString": "2025-11-13",
          "timeType": "DAY",
          "slot_status": {
            "formula": "filled",
            "time": "filled"
          },
          "value": null,
          "note": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ",
          "formula_candidates": null
        },
        "intent_info_snapshot": {
          "user_input_list": [
            "æ˜¨å¤©çš„é«˜ç‚‰å·¥åºèƒ½è€—æ˜¯å¤šå°‘"
          ],
          "intent_list": [
            "single_query"
          ],
          "indicators": [
            {
              "status": "completed",
              "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼",
              "formula": "GXNHLT1100.IXRL",
              "timeString": "2025-11-13",
              "timeType": "DAY",
              "slot_status": {
                "formula": "filled",
                "time": "filled"
              },
              "value": null,
              "note": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ",
              "formula_candidates": null
            }
          ]
        }
      }
    ],
    "relations": [],
    "_next_id": 2
  },
  "meta": {
    "current_intent_info": {},
    "history": [
      {
        "ask": "æ˜¨å¤©çš„é«˜ç‚‰å·¥åºèƒ½è€—æ˜¯å¤šå°‘",
        "reply": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None "
      }
    ]
  }
}
2025-11-14 15:23:33,872 | INFO | pipeline.handlers | âœ… è¿›å…¥ single query æ¨¡å¼ã€‚
2025-11-14 15:23:33,872 | INFO | pipeline.handlers | ğŸ”¹ handle_single_query user_input=é‚£é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼å‘¢
âœ… å·²ä»æœ€è¿‘èŠ‚ç‚¹æ¢å¤ intent_info: {'user_input_list': ['æ˜¨å¤©çš„é«˜ç‚‰å·¥åºèƒ½è€—æ˜¯å¤šå°‘'], 'intent_list': ['single_query'], 'indicators': [{'status': 'completed', 'indicator': 'é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼', 'formula': 'GXNHLT1100.IXRL', 'timeString': '2025-11-13', 'timeType': 'DAY', 'slot_status': {'formula': 'filled', 'time': 'filled'}, 'value': None, 'note': 'âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ', 'formula_candidates': None}]}
2025-11-14 15:23:33,873 | INFO | pipeline.handlers | ğŸ§© ä»æœ€è¿‘èŠ‚ç‚¹æ¢å¤ indicator: é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼
2025-11-14 15:23:33,973 | INFO | httpx | HTTP Request: GET http://192.168.92.13:11434/api/tags "HTTP/1.1 200 OK"
2025-11-14 15:23:35,022 | INFO | httpx | HTTP Request: POST http://192.168.92.13:11434/api/chat "HTTP/1.1 200 OK"
```json
{
  "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼",
  "timeString": null,
  "timeType": null
}
```
2025-11-14 15:23:36,099 | INFO | llm_client | âœ… ä» LLM è¾“å‡ºä¸­æˆåŠŸè§£æ JSONã€‚
ğŸŸ¡ è°ƒç”¨æ¥å£: http://www.shbaoenergy.com:8081/emscore/api/services/nYMC/calcData/QueryItemValuesAsync
ğŸ§© è¯·æ±‚å‚æ•°: {'expressionList': {'GXNHLT1100.IXPL': 'GXNHLT1100.IXPL'}, 'clock': '2025-11-13', 'timegranId': 'DAY'}
ğŸŸ¢ è¿”å›æ•°æ®: {'error': None, 'data': {'GXNHLT1100.IXPL': None}, 'status': 200, 'msg': 'æ“ä½œæˆåŠŸ', 'duration': -1}
2025-11-14 15:23:36,235 | INFO | pipeline.handlers | âš™ï¸ å¹³å°æŸ¥è¯¢æˆåŠŸ: {'GXNHLT1100.IXPL': None}
2025-11-14 15:23:36,235 | INFO | context_graph | ğŸ†• ContextGraph.add_node -> id=2, indicator=é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼, time=2025-11-13
2025-11-14 15:23:36,235 | INFO | context_graph | ğŸ•˜ add_history: é‚£é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼å‘¢ -> âœ… é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None 
Single Query Reply 2: âœ… é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None 
{
  "graph": {
    "nodes": [
      {
        "id": 1,
        "indicator_entry": {
          "status": "completed",
          "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼",
          "formula": "GXNHLT1100.IXRL",
          "timeString": "2025-11-13",
          "timeType": "DAY",
          "slot_status": {
            "formula": "filled",
            "time": "filled"
          },
          "value": null,
          "note": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ",
          "formula_candidates": null
        },
        "intent_info_snapshot": {
          "user_input_list": [
            "æ˜¨å¤©çš„é«˜ç‚‰å·¥åºèƒ½è€—æ˜¯å¤šå°‘"
          ],
          "intent_list": [
            "single_query"
          ],
          "indicators": [
            {
              "status": "completed",
              "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼",
              "formula": "GXNHLT1100.IXRL",
              "timeString": "2025-11-13",
              "timeType": "DAY",
              "slot_status": {
                "formula": "filled",
                "time": "filled"
              },
              "value": null,
              "note": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ",
              "formula_candidates": null
            }
          ]
        }
      },
      {
        "id": 2,
        "indicator_entry": {
          "status": "completed",
          "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼",
          "formula": "GXNHLT1100.IXPL",
          "timeString": "2025-11-13",
          "timeType": "DAY",
          "slot_status": {
            "formula": "filled",
            "time": "filled"
          },
          "value": null,
          "note": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ",
          "formula_candidates": null
        },
        "intent_info_snapshot": {
          "user_input_list": [
            "æ˜¨å¤©çš„é«˜ç‚‰å·¥åºèƒ½è€—æ˜¯å¤šå°‘",
            "é‚£é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼å‘¢"
          ],
          "intent_list": [
            "single_query",
            "single_query"
          ],
          "indicators": [
            {
              "status": "completed",
              "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼",
              "formula": "GXNHLT1100.IXRL",
              "timeString": "2025-11-13",
              "timeType": "DAY",
              "slot_status": {
                "formula": "filled",
                "time": "filled"
              },
              "value": null,
              "note": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ",
              "formula_candidates": null
            },
            {
              "status": "completed",
              "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼",
              "formula": "GXNHLT1100.IXPL",
              "timeString": "2025-11-13",
              "timeType": "DAY",
              "slot_status": {
                "formula": "filled",
                "time": "filled"
              },
              "value": null,
              "note": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ",
              "formula_candidates": null
            }
          ]
        }
      }
    ],
    "relations": [],
    "_next_id": 3
  },
  "meta": {
    "current_intent_info": {},
    "history": [
      {
        "ask": "æ˜¨å¤©çš„é«˜ç‚‰å·¥åºèƒ½è€—æ˜¯å¤šå°‘",
        "reply": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None "
      },
      {
        "ask": "é‚£é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼å‘¢",
        "reply": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None "
      }
    ]
  }
}
2025-11-14 15:23:36,235 | INFO | pipeline.handlers | ğŸ”€ è¿›å…¥ handle_compareï¼Œuser=test_user, input=å®ƒä»¬å¯¹æ¯”å‘¢ï¼Ÿ
âœ… å·²ä»æœ€è¿‘èŠ‚ç‚¹æ¢å¤ intent_info: {'user_input_list': ['æ˜¨å¤©çš„é«˜ç‚‰å·¥åºèƒ½è€—æ˜¯å¤šå°‘', 'é‚£é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼å‘¢'], 'intent_list': ['single_query', 'single_query'], 'indicators': [{'status': 'completed', 'indicator': 'é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼', 'formula': 'GXNHLT1100.IXRL', 'timeString': '2025-11-13', 'timeType': 'DAY', 'slot_status': {'formula': 'filled', 'time': 'filled'}, 'value': None, 'note': 'âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ', 'formula_candidates': None}, {'status': 'completed', 'indicator': 'é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼', 'formula': 'GXNHLT1100.IXPL', 'timeString': '2025-11-13', 'timeType': 'DAY', 'slot_status': {'formula': 'filled', 'time': 'filled'}, 'value': None, 'note': 'âœ… é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ', 'formula_candidates': None}]}
2025-11-14 15:23:36,235 | INFO | pipeline.handlers | ğŸ” compare: æœªæä¾› candidatesï¼Œå°è¯•ä» graph å›æº¯æœ€è¿‘ä¸¤ä¸ªèŠ‚ç‚¹
2025-11-14 15:23:36,327 | INFO | httpx | HTTP Request: GET http://192.168.92.13:11434/api/tags "HTTP/1.1 200 OK"
2025-11-14 15:23:36,690 | INFO | httpx | HTTP Request: POST http://192.168.92.13:11434/api/chat "HTTP/1.1 200 OK"
2025-11-14 15:23:37,406 | INFO | context_graph | ğŸ”— ContextGraph.add_relation: compare (source=1 target=2) meta={'via': 'pipeline.compare', 'user_input': 'å®ƒä»¬å¯¹æ¯”å‘¢ï¼Ÿ', 'result': '2025-11-13ï¼Œé«˜ç‚‰å·¥åºèƒ½è€—å®ç»©å’Œè®¡åˆ’æŠ¥å‡ºå€¼å‡ä¸ºæ— æ•°æ®ã€‚'}
2025-11-14 15:23:37,407 | INFO | context_graph | ğŸ•˜ add_history: å®ƒä»¬å¯¹æ¯”å‘¢ï¼Ÿ -> 2025-11-13ï¼Œé«˜ç‚‰å·¥åºèƒ½è€—å®ç»©å’Œè®¡åˆ’æŠ¥å‡ºå€¼å‡ä¸ºæ— æ•°æ®ã€‚
2025-11-14 15:23:37,407 | INFO | pipeline.handlers | âœ… compare(three-step) å®Œæˆ
Single Query Reply 3: 2025-11-13ï¼Œé«˜ç‚‰å·¥åºèƒ½è€—å®ç»©å’Œè®¡åˆ’æŠ¥å‡ºå€¼å‡ä¸ºæ— æ•°æ®ã€‚
{
  "graph": {
    "nodes": [
      {
        "id": 1,
        "indicator_entry": {
          "status": "completed",
          "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼",
          "formula": "GXNHLT1100.IXRL",
          "timeString": "2025-11-13",
          "timeType": "DAY",
          "slot_status": {
            "formula": "filled",
            "time": "filled"
          },
          "value": null,
          "note": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ",
          "formula_candidates": null
        },
        "intent_info_snapshot": {
          "user_input_list": [
            "æ˜¨å¤©çš„é«˜ç‚‰å·¥åºèƒ½è€—æ˜¯å¤šå°‘"
          ],
          "intent_list": [
            "single_query"
          ],
          "indicators": [
            {
              "status": "completed",
              "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼",
              "formula": "GXNHLT1100.IXRL",
              "timeString": "2025-11-13",
              "timeType": "DAY",
              "slot_status": {
                "formula": "filled",
                "time": "filled"
              },
              "value": null,
              "note": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ",
              "formula_candidates": null
            }
          ]
        }
      },
      {
        "id": 2,
        "indicator_entry": {
          "status": "completed",
          "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼",
          "formula": "GXNHLT1100.IXPL",
          "timeString": "2025-11-13",
          "timeType": "DAY",
          "slot_status": {
            "formula": "filled",
            "time": "filled"
          },
          "value": null,
          "note": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ",
          "formula_candidates": null
        },
        "intent_info_snapshot": {
          "user_input_list": [
            "æ˜¨å¤©çš„é«˜ç‚‰å·¥åºèƒ½è€—æ˜¯å¤šå°‘",
            "é‚£é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼å‘¢"
          ],
          "intent_list": [
            "single_query",
            "single_query"
          ],
          "indicators": [
            {
              "status": "completed",
              "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼",
              "formula": "GXNHLT1100.IXRL",
              "timeString": "2025-11-13",
              "timeType": "DAY",
              "slot_status": {
                "formula": "filled",
                "time": "filled"
              },
              "value": null,
              "note": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ",
              "formula_candidates": null
            },
            {
              "status": "completed",
              "indicator": "é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼",
              "formula": "GXNHLT1100.IXPL",
              "timeString": "2025-11-13",
              "timeType": "DAY",
              "slot_status": {
                "formula": "filled",
                "time": "filled"
              },
              "value": null,
              "note": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None ",
              "formula_candidates": null
            }
          ]
        }
      }
    ],
    "relations": [
      {
        "type": "compare",
        "source": 1,
        "target": 2,
        "meta": {
          "via": "pipeline.compare",
          "user_input": "å®ƒä»¬å¯¹æ¯”å‘¢ï¼Ÿ",
          "result": "2025-11-13ï¼Œé«˜ç‚‰å·¥åºèƒ½è€—å®ç»©å’Œè®¡åˆ’æŠ¥å‡ºå€¼å‡ä¸ºæ— æ•°æ®ã€‚"
        }
      }
    ],
    "_next_id": 3
  },
  "meta": {
    "current_intent_info": {},
    "history": [
      {
        "ask": "æ˜¨å¤©çš„é«˜ç‚‰å·¥åºèƒ½è€—æ˜¯å¤šå°‘",
        "reply": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—å®ç»©æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None "
      },
      {
        "ask": "é‚£é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼å‘¢",
        "reply": "âœ… é«˜ç‚‰å·¥åºèƒ½è€—è®¡åˆ’æŠ¥å‡ºå€¼ åœ¨ 2025-11-13 (DAY) çš„å€¼æ˜¯ None "
      },
      {
        "ask": "å®ƒä»¬å¯¹æ¯”å‘¢ï¼Ÿ",
        "reply": "2025-11-13ï¼Œé«˜ç‚‰å·¥åºèƒ½è€—å®ç»©å’Œè®¡åˆ’æŠ¥å‡ºå€¼å‡ä¸ºæ— æ•°æ®ã€‚"
      }
    ]
  }
}